EESchema Schematic File Version 2
LIBS:rLoop BMS v2-rescue
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:Oscillators
LIBS:BMS Library
LIBS:rLoop BMS v2-cache
EELAYER 25 0
EELAYER END
$Descr USLetter 11000 8500
encoding utf-8
Sheet 1 10
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Sheet
S 550  5900 2100 1400
U 590C18FD
F0 "MCU Connector" 60
F1 "MCU Connector.sch" 60
F2 "CONV_H" O R 2650 6750 60 
F3 "MISO_TO_PWR_NODE" I R 2650 6450 60 
F4 "MOSI_FROM_PWR_NODE" O R 2650 6350 60 
F5 "SCK_FROM_PWR_NODE" O R 2650 6650 60 
F6 "NCS_FROM_PWR_NODE" O R 2650 6550 60 
F7 "POWER_DN_DISABLE_FROM_PWR_NODE" O R 2650 6000 60 
F8 "VDD_FROM_BMS" O R 2650 6100 60 
F9 "FAULT_H" I R 2650 6850 60 
F10 "ALERT_H" I R 2650 6950 60 
F11 "DRDY_H" O R 2650 7050 60 
$EndSheet
$Sheet
S 9050 1500 650  2000
U 590C26AF
F0 "Batt Conn" 60
F1 "Batt Conn.sch" 60
F2 "Cell_0" O L 9050 3400 60 
F3 "Cell_1" O L 9050 3300 60 
F4 "Cell_2" O L 9050 3200 60 
F5 "Cell_3" O L 9050 3100 60 
F6 "Cell_4" O L 9050 3000 60 
F7 "Cell_5" O L 9050 2900 60 
F8 "Cell_6" O L 9050 2800 60 
F9 "Cell_7" O L 9050 2700 60 
F10 "Cell_8" O L 9050 2600 60 
F11 "Cell_9" O L 9050 2500 60 
F12 "Cell_10" O L 9050 2400 60 
F13 "Cell_11" O L 9050 2300 60 
F14 "Cell_12" O L 9050 2200 60 
F15 "Cell_13" O L 9050 2100 60 
F16 "Cell_14" O L 9050 2000 60 
F17 "Cell_15" O L 9050 1900 60 
F18 "Cell_16" O L 9050 1800 60 
F19 "Cell_17" O L 9050 1700 60 
F20 "Cell_18" O L 9050 1600 60 
$EndSheet
Wire Wire Line
	3200 1350 3700 1350
Wire Wire Line
	3700 3300 3200 3300
Wire Wire Line
	3200 3300 3200 1350
Wire Wire Line
	3700 3400 3100 3400
Wire Wire Line
	3100 3400 3100 1250
Wire Wire Line
	3100 1250 3700 1250
Wire Wire Line
	3700 3500 3000 3500
Wire Wire Line
	3000 3500 3000 1150
Wire Wire Line
	3000 1150 3700 1150
Wire Wire Line
	3700 1050 2900 1050
Wire Wire Line
	2900 1050 2900 3600
Wire Wire Line
	2900 3600 3700 3600
Wire Wire Line
	3200 5900 3700 5900
Wire Wire Line
	3200 4050 3200 5900
Wire Wire Line
	3200 4050 3700 4050
Wire Wire Line
	3700 3950 3100 3950
Wire Wire Line
	3100 3950 3100 6000
Wire Wire Line
	3100 6000 3700 6000
Wire Wire Line
	3700 6100 3000 6100
Wire Wire Line
	3000 6100 3000 3850
Wire Wire Line
	3000 3850 3700 3850
Wire Wire Line
	3700 3750 2900 3750
Wire Wire Line
	2900 3750 2900 6200
Wire Wire Line
	2900 6200 3700 6200
Wire Wire Line
	2650 6650 3700 6650
Wire Wire Line
	2650 6450 3700 6450
Wire Wire Line
	2650 6350 3700 6350
$Sheet
S 3700 650  1750 1750
U 590C6B15
F0 "CONTROLLER 3" 60
F1 "CONTROLLER_3.sch" 60
F2 "MBAT1" I R 5450 2150 60 
F3 "MBAT2" I R 5450 2050 60 
F4 "MBAT3" I R 5450 1950 60 
F5 "MBAT4" I R 5450 1850 60 
F6 "MBAT5" I R 5450 1750 60 
F7 "MBAT6" I R 5450 1650 60 
F8 "MBAT7" I R 5450 1550 60 
F9 "DISCHG_GATE_1" O R 5450 1400 60 
F10 "DISCHG_GATE_2" O R 5450 1300 60 
F11 "DISCHG_GATE_3" O R 5450 1200 60 
F12 "DISCHG_GATE_4" O R 5450 1100 60 
F13 "DISCHG_GATE_5" O R 5450 1000 60 
F14 "DISCHG_GATE_6" O R 5450 900 60 
F15 "CS_S" I L 3700 1450 60 
F16 "SDO_S" O L 3700 1250 60 
F17 "SDI_S" I L 3700 1350 60 
F18 "CONV_S" I L 3700 1050 60 
F19 "SCLK_S" I L 3700 1150 60 
F20 "VDDHV" I R 5450 750 60 
F21 "GND" I R 5450 2300 60 
F22 "FAULT_S" I L 3700 1550 60 
F23 "ALERT_S" I L 3700 1650 60 
F24 "DRDY_S" I L 3700 1750 60 
$EndSheet
$Sheet
S 3700 2750 1750 1850
U 590D87FF
F0 "CONTROLLER 2" 60
F1 "CONTROLLER_2.sch" 60
F2 "MBAT1" I R 5450 4300 60 
F3 "MBAT2" I R 5450 4200 60 
F4 "MBAT3" I R 5450 4100 60 
F5 "MBAT4" I R 5450 4000 60 
F6 "MBAT5" I R 5450 3900 60 
F7 "MBAT6" I R 5450 3800 60 
F8 "MBAT7" I R 5450 3700 60 
F9 "DISCHG_GATE_1" O R 5450 3500 60 
F10 "DISCHG_GATE_2" O R 5450 3400 60 
F11 "DISCHG_GATE_3" O R 5450 3300 60 
F12 "DISCHG_GATE_4" O R 5450 3200 60 
F13 "DISCHG_GATE_5" O R 5450 3100 60 
F14 "DISCHG_GATE_6" O R 5450 3000 60 
F15 "SDO_S" O L 3700 3950 60 
F16 "SDI_S" I L 3700 4050 60 
F17 "CONV_S" I L 3700 3750 60 
F18 "SCLK_S" I L 3700 3850 60 
F19 "SCLK_N" O L 3700 3500 60 
F20 "SDI_N" O L 3700 3300 60 
F21 "SDO_N" I L 3700 3400 60 
F22 "CONV_N" O L 3700 3600 60 
F23 "VDDHV" I R 5450 2850 60 
F24 "GND" I R 5450 4450 60 
F25 "CS_S" I L 3700 4150 60 
F26 "CS_N" O L 3700 3200 60 
F27 "FAULT_N" I L 3700 3100 60 
F28 "ALERT_N" I L 3700 3000 60 
F29 "DRDY_N" I L 3700 2900 60 
F30 "FAULT_S" O L 3700 4250 60 
F31 "ALERT_S" O L 3700 4350 60 
F32 "DRDY_S" O L 3700 4450 60 
$EndSheet
$Sheet
S 3700 5350 1750 2050
U 590D88AD
F0 "CONTROLLER 1" 60
F1 "CONTROLLER_1.sch" 60
F2 "MBAT1" I R 5450 6950 60 
F3 "MBAT2" I R 5450 6850 60 
F4 "MBAT3" I R 5450 6750 60 
F5 "MBAT4" I R 5450 6650 60 
F6 "MBAT5" I R 5450 6550 60 
F7 "MBAT6" I R 5450 6450 60 
F8 "MBAT7" I R 5450 6350 60 
F9 "DISCHG_GATE_1" O R 5450 6200 60 
F10 "DISCHG_GATE_2" O R 5450 6100 60 
F11 "DISCHG_GATE_3" O R 5450 6000 60 
F12 "DISCHG_GATE_4" O R 5450 5900 60 
F13 "DISCHG_GATE_5" O R 5450 5800 60 
F14 "DISCHG_GATE_6" O R 5450 5700 60 
F15 "CS_N" I L 3700 5800 60 
F16 "SCLK_H" I L 3700 6650 60 
F17 "SDI_H" I L 3700 6350 60 
F18 "SDO_H" O L 3700 6450 60 
F19 "CONV_H" I L 3700 6750 60 
F20 "SCLK_N" I L 3700 6100 60 
F21 "SDI_N" O L 3700 5900 60 
F22 "SDO_N" O L 3700 6000 60 
F23 "CONV_N" O L 3700 6200 60 
F24 "VDDHV" I R 5450 5550 60 
F25 "GND" I R 5450 7150 60 
F26 "CS_H" O L 3700 6550 60 
F27 "FAULT_N" I L 3700 5700 60 
F28 "ALERT_N" I L 3700 5600 60 
F29 "DRDY_N" I L 3700 5500 60 
F30 "FAULT_H" O L 3700 6850 60 
F31 "ALERT_H" O L 3700 6950 60 
F32 "DRDY_H" O L 3700 7050 60 
$EndSheet
Wire Wire Line
	3700 3200 3300 3200
Wire Wire Line
	3300 3200 3300 1450
Wire Wire Line
	3300 1450 3700 1450
$Sheet
S 6250 2750 1400 1650
U 592BCE04
F0 "DISCHARGE_2" 60
F1 "DISCHARGE_2.sch" 60
F2 "DISCHARGE_1" I L 6250 3500 60 
F3 "DISCHARGE_2" I L 6250 3400 60 
F4 "DISCHARGE_3" I L 6250 3300 60 
F5 "DISCHARGE_4" I L 6250 3200 60 
F6 "DISCHARGE_5" I L 6250 3100 60 
F7 "DISCHARGE_6" I L 6250 3000 60 
F8 "MBATT_0" O L 6250 4300 60 
F9 "MBATT_1" O L 6250 4200 60 
F10 "MBATT_2" O L 6250 4100 60 
F11 "MBATT_3" O L 6250 4000 60 
F12 "MBATT_4" O L 6250 3900 60 
F13 "MBATT_5" O L 6250 3800 60 
F14 "MBATT_6" O L 6250 3700 60 
F15 "CELL_1" I R 7650 4000 60 
F16 "CELL_2" I R 7650 3900 60 
F17 "CELL_3" I R 7650 3800 60 
F18 "CELL_4" I R 7650 3700 60 
F19 "CELL_5" I R 7650 3600 60 
F20 "CELL_6" I R 7650 3500 60 
F21 "CELL_0" I R 7650 4100 60 
F22 "BATT" O L 6250 2850 60 
$EndSheet
$Sheet
S 6250 650  1400 1600
U 592BE1E1
F0 "DISCHARGE_3" 60
F1 "DISCHARGE_3.sch" 60
F2 "DISCHARGE_1" I L 6250 1400 60 
F3 "DISCHARGE_2" I L 6250 1300 60 
F4 "DISCHARGE_3" I L 6250 1200 60 
F5 "DISCHARGE_4" I L 6250 1100 60 
F6 "DISCHARGE_5" I L 6250 1000 60 
F7 "DISCHARGE_6" I L 6250 900 60 
F8 "MBATT_0" O L 6250 2150 60 
F9 "MBATT_1" O L 6250 2050 60 
F10 "MBATT_2" O L 6250 1950 60 
F11 "MBATT_3" O L 6250 1850 60 
F12 "MBATT_4" O L 6250 1750 60 
F13 "MBATT_5" O L 6250 1650 60 
F14 "MBATT_6" O L 6250 1550 60 
F15 "CELL_1" I R 7650 1900 60 
F16 "CELL_2" I R 7650 1800 60 
F17 "CELL_3" I R 7650 1700 60 
F18 "CELL_4" I R 7650 1600 60 
F19 "CELL_5" I R 7650 1500 60 
F20 "CELL_6" I R 7650 1400 60 
F21 "CELL_0" I R 7650 2000 60 
F22 "BATT" O L 6250 750 60 
$EndSheet
$Sheet
S 6250 4750 1400 1600
U 591622E5
F0 "DISCHARGE_1" 60
F1 "DISCHARGE_1.sch" 60
F2 "DISCHARGE_1" I L 6250 5500 60 
F3 "DISCHARGE_2" I L 6250 5400 60 
F4 "DISCHARGE_3" I L 6250 5300 60 
F5 "DISCHARGE_4" I L 6250 5200 60 
F6 "DISCHARGE_5" I L 6250 5100 60 
F7 "DISCHARGE_6" I L 6250 5000 60 
F8 "MBATT_0" O L 6250 6250 60 
F9 "MBATT_1" O L 6250 6150 60 
F10 "MBATT_2" O L 6250 6050 60 
F11 "MBATT_3" O L 6250 5950 60 
F12 "MBATT_4" O L 6250 5850 60 
F13 "MBATT_5" O L 6250 5750 60 
F14 "MBATT_6" O L 6250 5650 60 
F15 "CELL_0" I R 7650 5750 60 
F16 "CELL_1" I R 7650 5650 60 
F17 "CELL_2" I R 7650 5550 60 
F18 "CELL_3" I R 7650 5450 60 
F19 "CELL_4" I R 7650 5350 60 
F20 "CELL_5" I R 7650 5250 60 
F21 "CELL_6" I R 7650 5150 60 
F22 "BATT" O L 6250 4850 60 
$EndSheet
Wire Wire Line
	5450 750  6250 750 
Wire Wire Line
	6250 900  5450 900 
Wire Wire Line
	5450 1000 6250 1000
Wire Wire Line
	6250 1100 5450 1100
Wire Wire Line
	5450 1200 6250 1200
Wire Wire Line
	6250 1300 5450 1300
Wire Wire Line
	5450 1400 6250 1400
Wire Wire Line
	6250 1550 5450 1550
Wire Wire Line
	5450 1650 6250 1650
Wire Wire Line
	6250 1750 5450 1750
Wire Wire Line
	5450 1850 6250 1850
Wire Wire Line
	6250 1950 5450 1950
Wire Wire Line
	5450 2050 6250 2050
Wire Wire Line
	5450 2150 6250 2150
Wire Wire Line
	5450 2300 5550 2300
Wire Wire Line
	5550 2300 5550 2150
Connection ~ 5550 2150
Wire Wire Line
	5450 2850 6250 2850
Wire Wire Line
	6250 3000 5450 3000
Wire Wire Line
	5450 3100 6250 3100
Wire Wire Line
	6250 3200 5450 3200
Wire Wire Line
	5450 3300 6250 3300
Wire Wire Line
	6250 3400 5450 3400
Wire Wire Line
	5450 3500 6250 3500
Wire Wire Line
	6250 3700 5450 3700
Wire Wire Line
	5450 3800 6250 3800
Wire Wire Line
	6250 3900 5450 3900
Wire Wire Line
	5450 4000 6250 4000
Wire Wire Line
	6250 4100 5450 4100
Wire Wire Line
	5450 4200 6250 4200
Wire Wire Line
	5450 4300 6250 4300
Wire Wire Line
	5450 5550 5500 5550
Wire Wire Line
	5500 5550 5500 4850
Wire Wire Line
	5500 4850 6250 4850
Wire Wire Line
	6250 5000 5550 5000
Wire Wire Line
	5550 5000 5550 5700
Wire Wire Line
	5550 5700 5450 5700
Wire Wire Line
	5450 5800 5600 5800
Wire Wire Line
	5600 5800 5600 5100
Wire Wire Line
	5600 5100 6250 5100
Wire Wire Line
	6250 5200 5650 5200
Wire Wire Line
	5650 5200 5650 5900
Wire Wire Line
	5650 5900 5450 5900
Wire Wire Line
	5450 6000 5700 6000
Wire Wire Line
	5700 6000 5700 5300
Wire Wire Line
	5700 5300 6250 5300
Wire Wire Line
	6250 5400 5750 5400
Wire Wire Line
	5750 5400 5750 6100
Wire Wire Line
	5750 6100 5450 6100
Wire Wire Line
	5450 6200 5800 6200
Wire Wire Line
	5800 6200 5800 5500
Wire Wire Line
	5800 5500 6250 5500
Wire Wire Line
	6250 5650 5850 5650
Wire Wire Line
	5850 5650 5850 6350
Wire Wire Line
	5850 6350 5450 6350
Wire Wire Line
	5450 6450 5900 6450
Wire Wire Line
	5900 6450 5900 5750
Wire Wire Line
	5900 5750 6250 5750
Wire Wire Line
	6250 5850 5950 5850
Wire Wire Line
	5950 5850 5950 6550
Wire Wire Line
	5950 6550 5450 6550
Wire Wire Line
	5450 6650 6000 6650
Wire Wire Line
	6000 6650 6000 5950
Wire Wire Line
	6000 5950 6250 5950
Wire Wire Line
	6250 6050 6050 6050
Wire Wire Line
	6050 6050 6050 6750
Wire Wire Line
	6050 6750 5450 6750
Wire Wire Line
	5450 6850 6100 6850
Wire Wire Line
	6100 6850 6100 6150
Wire Wire Line
	6100 6150 6250 6150
Wire Wire Line
	6250 6250 6150 6250
Wire Wire Line
	6150 6250 6150 6950
Wire Wire Line
	6150 6950 5450 6950
Wire Wire Line
	5450 7150 5550 7150
Wire Wire Line
	5550 7150 5550 6950
Connection ~ 5550 6950
Wire Wire Line
	8750 550  8750 5750
Wire Wire Line
	8750 5750 7650 5750
Wire Wire Line
	7650 5650 8700 5650
Wire Wire Line
	8700 5650 8700 3300
Wire Wire Line
	8700 3300 9050 3300
Wire Wire Line
	9050 3200 8650 3200
Wire Wire Line
	8650 3200 8650 5550
Wire Wire Line
	8650 5550 7650 5550
Wire Wire Line
	7650 5450 8600 5450
Wire Wire Line
	8600 5450 8600 3100
Wire Wire Line
	8600 3100 9050 3100
Wire Wire Line
	9050 3000 8550 3000
Wire Wire Line
	8550 3000 8550 5350
Wire Wire Line
	8550 5350 7650 5350
Wire Wire Line
	7650 5250 8500 5250
Wire Wire Line
	8500 5250 8500 2900
Wire Wire Line
	8500 2900 9050 2900
Wire Wire Line
	8450 5150 7650 5150
Wire Wire Line
	8450 2800 8450 5150
Wire Wire Line
	8450 2800 9050 2800
Wire Wire Line
	7650 4100 8450 4100
Connection ~ 8450 4100
Wire Wire Line
	7650 4000 8400 4000
Wire Wire Line
	8400 4000 8400 2700
Wire Wire Line
	8400 2700 9050 2700
Wire Wire Line
	9050 2600 8350 2600
Wire Wire Line
	8350 2600 8350 3900
Wire Wire Line
	8350 3900 7650 3900
Wire Wire Line
	7650 3800 8300 3800
Wire Wire Line
	8300 3800 8300 2500
Wire Wire Line
	8300 2500 9050 2500
Wire Wire Line
	9050 2400 8250 2400
Wire Wire Line
	8250 2400 8250 3700
Wire Wire Line
	8250 3700 7650 3700
Wire Wire Line
	7650 3600 8200 3600
Wire Wire Line
	8200 3600 8200 2300
Wire Wire Line
	8200 2300 9050 2300
Wire Wire Line
	7900 2200 9050 2200
Wire Wire Line
	8150 2200 8150 3500
Wire Wire Line
	8150 3500 7650 3500
Wire Wire Line
	7650 2000 7900 2000
Wire Wire Line
	7900 2000 7900 2200
Connection ~ 8150 2200
Wire Wire Line
	7650 1900 7950 1900
Wire Wire Line
	7950 1900 7950 2100
Wire Wire Line
	7950 2100 9050 2100
Wire Wire Line
	9050 2000 8000 2000
Wire Wire Line
	8000 2000 8000 1800
Wire Wire Line
	8000 1800 7650 1800
Wire Wire Line
	7650 1700 8050 1700
Wire Wire Line
	8050 1700 8050 1900
Wire Wire Line
	8050 1900 9050 1900
Wire Wire Line
	9050 1800 8100 1800
Wire Wire Line
	8100 1800 8100 1600
Wire Wire Line
	8100 1600 7650 1600
Wire Wire Line
	7650 1500 8150 1500
Wire Wire Line
	8150 1500 8150 1700
Wire Wire Line
	8150 1700 9050 1700
Wire Wire Line
	8200 1600 9050 1600
Wire Wire Line
	8200 500  8200 1600
Wire Wire Line
	8200 1400 7650 1400
Wire Wire Line
	2650 6550 3700 6550
Wire Wire Line
	3700 4150 3300 4150
Wire Wire Line
	3300 4150 3300 5800
Wire Wire Line
	3300 5800 3700 5800
Wire Wire Line
	3700 5700 3400 5700
Wire Wire Line
	3400 5700 3400 4250
Wire Wire Line
	3400 4250 3700 4250
Wire Wire Line
	3700 4350 3500 4350
Wire Wire Line
	3500 4350 3500 5600
Wire Wire Line
	3500 5600 3700 5600
Wire Wire Line
	3700 5500 3600 5500
Wire Wire Line
	3600 5500 3600 4450
Wire Wire Line
	3600 4450 3700 4450
Wire Wire Line
	3700 1550 3400 1550
Wire Wire Line
	3400 1550 3400 3100
Wire Wire Line
	3400 3100 3700 3100
Wire Wire Line
	3700 3000 3500 3000
Wire Wire Line
	3500 3000 3500 1650
Wire Wire Line
	3500 1650 3700 1650
Wire Wire Line
	3700 1750 3600 1750
Wire Wire Line
	3600 1750 3600 2900
Wire Wire Line
	3600 2900 3700 2900
$Sheet
S 800  1900 1550 1200
U 592F4D0C
F0 "ISO POWER" 60
F1 "ISO Power.sch" 60
F2 "ISO_GND" O R 2350 2350 60 
F3 "BATT" O R 2350 2200 60 
F4 "5V_ISO" O R 2350 2600 60 
F5 "COMMS_EN" I R 2350 2750 60 
$EndSheet
Wire Wire Line
	2650 500  2650 2200
Wire Wire Line
	2650 2200 2350 2200
Wire Wire Line
	2650 500  8200 500 
Connection ~ 8200 1400
Wire Wire Line
	2350 2350 2800 2350
Wire Wire Line
	2800 2350 2800 550 
Wire Wire Line
	2800 550  8750 550 
Connection ~ 8750 3400
Wire Wire Line
	2350 2600 2800 2600
Wire Wire Line
	2800 2600 2800 6100
Wire Wire Line
	2800 6100 2650 6100
Wire Wire Line
	2350 2750 2700 2750
Wire Wire Line
	2700 2750 2700 6000
Wire Wire Line
	2700 6000 2650 6000
Wire Wire Line
	5450 4450 5800 4450
Wire Wire Line
	5800 4450 5800 4300
Connection ~ 5800 4300
Wire Wire Line
	2650 6750 3700 6750
Wire Wire Line
	2650 6850 3700 6850
Wire Wire Line
	3700 6950 2650 6950
Wire Wire Line
	2650 7050 3700 7050
Wire Wire Line
	8750 3400 9050 3400
$EndSCHEMATC
